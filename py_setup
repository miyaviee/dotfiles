#!/bin/bash

for ver in 2 3; do
  PIP=`which pip${ver} || which pip`
  PYTHON=`which python${ver} || which python`
  DIR=neovim${ver}

  ${PIP} freeze | xargs ${PIP} uninstall -y
  ${PIP} install -IU pip
  ${PIP} install -IU -r requirements.txt
  [ ${ver} -eq 3 ] && ${PIP} install -IU pipenv pylint
  rm -rf ~/${DIR} && ${PYTHON} -m virtualenv ~/${DIR}
  source ~/${DIR}/bin/activate
  pip install -IU pynvim
  deactivate
done
