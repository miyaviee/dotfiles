#!/bin/bash

ver=${1}
if [ -z "${1}" ]; then
  echo "version is required."
  exit
fi

PIP=`which pip${ver} || which pip`
PYTHON=`which python${ver} || which python`
DIR=neovim${ver}

${PIP} freeze | xargs ${PIP} uninstall -y
${PIP} install -IU pip
${PIP} install -IU -r requirements.txt
[ ${ver} -eq 2 ] && ${PIP} install -IU awscli
[ ${ver} -eq 3 ] && ${PIP} install -IU black pipenv pylint pylint-django
rm -rf ~/${DIR} && ${PYTHON} -m virtualenv ~/${DIR}
source ~/${DIR}/bin/activate
pip install -IU pynvim
deactivate
